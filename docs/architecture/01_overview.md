# Architecture: Overview

The WEAVE system is an enterprise-grade, cloud-native platform designed for high performance, scalability, and resilience. This document provides a high-level overview of the complete architecture, from user interaction to backend integration.

## Full Architecture Diagram

The diagram below illustrates the six primary layers of the WEAVE architecture. This layered approach ensures a clear separation of concerns, allowing each part of the system to scale and evolve independently.

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                              USER LAYER                                      │
│                                                                             │
│    ┌──────────┐     ┌──────────┐     ┌──────────┐     ┌──────────┐        │
│    │ WhatsApp │     │ Web App  │     │  Store   │     │  Voice   │        │
│    │ Business │     │ (Next.js)│     │  Kiosk   │     │   IVR    │        │
│    └────┬─────┘     └────┬─────┘     └────┬─────┘     └────┬─────┘        │
│         │                │                │                │               │
└─────────┼────────────────┼────────────────┼────────────────┼───────────────┘
          │                │                │                │
          └────────────────┴────────────────┴────────────────┘
                                    │
                                    ▼
┌─────────────────────────────────────────────────────────────────────────────┐
│                           API GATEWAY LAYER                                  │
│                                                                             │
│    ┌─────────────────────────────────────────────────────────────────┐     │
│    │                      Cloud Load Balancer                         │     │
│    │                    + Cloud Armor (DDoS)                          │     │
│    └─────────────────────────────────────────────────────────────────┘     │
│                                    │                                        │
│    ┌─────────────────────────────────────────────────────────────────┐     │
│    │                    API Gateway (Cloud Run)                       │     │
│    │         • Rate Limiting  • Auth  • Request Routing              │     │
│    └─────────────────────────────────────────────────────────────────┘     │
│                                                                             │
└─────────────────────────────────────────────────────────────────────────────┘
                                    │
                                    ▼
┌─────────────────────────────────────────────────────────────────────────────┐
│                        ORCHESTRATION LAYER                                   │
│                                                                             │
│    ┌─────────────────────────────────────────────────────────────────┐     │
│    │                    GEMINI 2.0 FLASH                             │     │
│    │                   (Central Orchestrator)                        │     │
│    └─────────────────────────────────────────────────────────────────┘     │
│                                                                             │
└─────────────────────────────────────────────────────────────────────────────┘
                                    │
                                    ▼
┌─────────────────────────────────────────────────────────────────────────────┐
│                           AGENT LAYER                                        │
│                                                                             │
│   [Discovery] [Style DNA] [Rescue] [Bridge] [Family] [Proactive] [Voice]    │
│                                                                             │
└─────────────────────────────────────────────────────────────────────────────┘
                                    │
                                    ▼
┌─────────────────────────────────────────────────────────────────────────────┐
│                          MEMORY LAYER (Thread Memory™)                      │
│                                                                             │
│   ┌─────────────────┐ ┌───────────────────┐ ┌─────────────────┐           │
│   │   HOT (<5ms)    │ │  SEMANTIC (<50ms) │ │   DEEP (<100ms) │           │
│   │   (Redis)       │ │  (Vertex AI)      │ │   (Firestore)   │           │
│   └─────────────────┘ └───────────────────┘ └─────────────────┘           │
│                                                                             │
└─────────────────────────────────────────────────────────────────────────────┘
                                    │
                                    ▼
┌─────────────────────────────────────────────────────────────────────────────┐
│                         EVENT BUS LAYER                                      │
│                                                                             │
│    ┌─────────────────────────────────────────────────────────────────┐     │
│    │                     Cloud Pub/Sub                                │     │
│    └─────────────────────────────────────────────────────────────────┘     │
│                                                                             │
└─────────────────────────────────────────────────────────────────────────────┘
                                    │
                                    ▼
┌─────────────────────────────────────────────────────────────────────────────┐
│                        INTEGRATION LAYER                                     │
│                                                                             │
│   [WhatsApp API] [Razorpay] [Shopify] [Store POS] [Google APIs]             │
│                                                                             │
└─────────────────────────────────────────────────────────────────────────────┘
```
